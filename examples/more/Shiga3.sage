"""
 *  Treating genus 3 curves by cheating
 *
 *  Copyright (C) 2016  J.R. Sijsling (sijsling@gmail.com)
 *
 *  Distributed under the terms of the GNU General License (GPL)
 *                  http://www.gnu.org/licenses/
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU General Public License as published by
 *  the Free Software Foundation; either version 2 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License along
 *  with this program; if not, write to the Free Software Foundation, Inc., 51
 *  Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
"""

# Add if no initilization script set:
load('Initialize.sage')

# To obtain the following matrices, use this Maple code:
#Digits := 100:
#with(algcurves):
#f := y^3 - x^4 - x^2 - 1:
#f := y^3 - x^4 - x - 1:
#f := y^3 - 3*x^4 - 2*x^2 + 5:
#f := y^3 - 8*x^4 - 8*x^2 - 1:
#pm := periodmatrix(f,x,y):
#evalf(pm, 100);

prec = 100
CC = magma.ComplexField(prec)
I = CC.1

P = magma.Matrix([
    [1.134803188672312495958997095518625121773662233708117045195687474471598448204389367801693974966143368 +
    0.655178926457205294613395448383109293820699555666687171973623387273581675781031842354884854550813697*I ,
    1.443035550619606019725504093506357954719691587853018502632683227023212735171150749674848294985999088,
    1.856320963982115505821749142271804099133508027634626296512029087983204815789964742639118122459142907 +
    0.594526518943438762880598076969222413388186637007333140499906336219622825272632576680173553558894955*I ,
    -1.443035550619606019725504093506357954719691587853018502632683227023212735171150749674848294985999078,
    -0.721517775309803009862752046753178977359845793926509251316341613511606367585575374837424147492999544 +
    0.060652407513766531732797371413886880432512918659354031473717051053958850508399265674711300991918745*I ,
    -0.413285413362509486096245048765446144413816439781607793879345860959992080618813992964269827473143829 +
    0.5945265189434387628805980769692224133881866370073331404999063362196228252726325766801735535588949550*I],
    [0.682319183976174766324958975409193568786879222162546696709634338430359490641519124284164506267360778 -
    0.393937164541890287829467884162914242862166776378667309925264812857841626510252321453473129270790009*I ,
    -1.133386679254062992090179826170562559719344135648094849153688120753667339237093083106513452386485462,
    0.115625844349143270279869062323912288927207154338499272132790278053525821022972582730907780074118047 +
    1.375478821086794242875838812347729067491252804872217620264038334810437083354594246707149689540001727*I ,
    1.133386679254062992090179826170562559719344135648094849153688120753667339237093083106513452386485462,
    0.566693339627031496045089913085281279859672067824047424576844060376833669618546541553256726193242733 -
    1.769415985628684530705306696510643310353419581250884930189303147668278709864846568160622818810791736*I ,
    -1.249012523603206262370048888494474848646551289986594121286478398807193160260065665837421232460603510 +
    1.375478821086794242875838812347729067491252804872217620264038334810437083354594246707149689540001727*I],
    [0.636983494621901784641039487225435548918801822776654682337034601298411045488944956681897546438373876 -
    1.103287776267910592404414808764092976528379922937855445400071134013121572428383162131545363935886701*I ,
    1.273966989243803569282078974450871097837603645553309364674069202596822090977889913363795092876747742,
    0,
    1.273966989243803569282078974450871097837603645553309364674069202596822090977889913363795092876747760,
    -0.636983494621901784641039487225435548918801822776654682337034601298411045488944956681897546438373871 +
    1.103287776267910592404414808764092976528379922937855445400071134013121572428383162131545363935886701*I ,
    -1.273966989243803569282078974450871097837603645553309364674069202596822090977889913363795092876747756]
])

#P = magma.Matrix([
#    [1.060409906404544878113754459920602779881560972883638581488497831332681253274167337850515310156396303 +
#    0.854276481472885988366196307822367880439681459644991302506181848394296987507460968619783401976678570*I ,
#    1.079821631462513489050072723002175694155720552895085151205405754258642368432365873889080691402676974,
#    1.809940903744634792318467574076852646642236921412699752948149222590977046003620477879527473444241563 +
#    0.443949287767922766166395737917105447179309806858559299812678924949775702577249072148135799646271520*I ,
#    -1.499061994680179828409426228312499733521351897058122342919302782516591585458906280058024326575690536,
#    -0.539910815731256744525036361501087847077860276447542575602702877129321184216182936944540345701338477 +
#    0.047254388866649010745383722618389870131082975870458629777545605717310580157260065574558818193861640*I ,
#    -0.310878909064454963909041345764352913120885024354577410028846440074385460544714197821503146868551040 +
#    0.443949287767922766166395737917105447179309806858559299812678924949775702577249072148135799646271510*I],
#    [0.802002982878253423177296194572447188375457345115995729232612080617532201369538827635494665106390618 -
#    0.609506624027450963630673945748585191971289133090022280948779036307557539451593536147600951136350218*I ,
#    -1.030271608955592435447950393549693704682260731398685933402785868288989308425062919601392894791307424,
#    0.4137139071439937490512846797788990917332050217199937384922957018065912500012962387016468557906623640 +
#    1.282043031223148388258168492856642049837740610818514939746765274724579355849769583456811535742098704*I ,
#    0.7765781514685193482520230295870961932845046467920039814806327576218819027364851778676956186314565300,
#    0.5151358044777962177239751967748468523411303656993429667013929341444946542125314598006964473956537020 -
#    1.671844676292886561775565556496475181145880349058855106128517265599179349455833775716331406945988588*I ,
#    -1.190292058612513097303307709365995285017709668511997719972928459428473152737781416569342474422118878 +
#    1.282043031223148388258168492856642049837740610818514939746765274724579355849769583456811535742098704*I],
#    [0.531402512724810700783644398384616622218792977940370928152126959085990313706197007222908735303845000 -
#    1.108494870324286439047562911922098593933143729399629789063944402627953204134785517644438248741169955*I ,
#    1.252191723528367294501753904353118895688164379005398797443959071021716793885890753985964108529777190,
#    -0.068187599538980122442613507886381824968205878605278579217024913777665311153822931524628787483651700 +
#    0.069974332167473746508885525223458482761408423334145105839994536706452089842144122940190395489045730*I ,
#    1.199180224527581646452515812541996894373997713091299014738303745727311249720039877495075045574993400,
#    -0.626095861764183647250876952176559447844082189502699398721979535510858396942945376992982054264888595 +
#    0.944481178649238956228456675350624070147544457597582306259832117048457765932502276876221726298711559*I ,
#    -1.130992624988601524009902304655615069405791834486020435521278831949645938566216945970446258091341700 +
#    0.069974332167473746508885525223458482761408423334145105839994536706452089842144122940190395489045730*I]
#])

#P = magma.Matrix([
#    [0.3596159620758356536660049977404867887369301100593537786884791071335461276084493654463922346684666390 +
#    0.343563140948777788480542697055306391620026148465963468899045590689675543151291737878907248789626802*I ,
#    0.5950688157312305839801285639716368841716631333870687251330044735076772154846732174482597915197377080 +
#    0.343563140948777788480542697055306391620026148465963468899045590689675543151291737878907248789626801*I ,
#    0.4773423889035331188230667808560618364542966217232112519107417903206116715465612914473260130941021720 +
#    0.547471293607889524028083424779836065943609274763851564989372691404522591620883123003583793959813535*I ,
#    -0.235452853655394930314123566231150095434733023327714946444525366374131087876223852001867556851271064,
#    -0.595068815731230583980128563971636884171663133387068725133004473507677215484673217448259791519737704 -
#    0.064253164369445682614538758393752957027140104129812723281608610740018553787891032370445841550746689*I ,
#    -0.2418895352481381885089432146249117410195635983954963054662164239464805836703374394454584562428311090 -
#    0.139654988289666052933001969330776717296443022168075372808718489974828494681700352754230703619440060*I],
#    [0.482778480811134185083659520507167194653736512226247761497640276126846621100557938502820017690657473 +
#    0.406972827761173276156188510842412165564810714230889462687160541001695323544333180671731137011357962*I ,
#    -0.704897614982329777029148001187332580475396093589108695173092617281479154830767241122635281163529973 +
#    0.406972827761173276156188510842412165564810714230889462687160541001695323544333180671731137011357960*I ,
#    -0.111059567085597795972744240340082692910829790681430466837726170577316266865104651309907631736436259 +
#    1.435530498185833538088756296075740876973576186991355352239650648751560424138568397520521985657651122*I ,
#    1.187676095793463962112807521694499775129132605815356456670732893408325775931325179625455298854187459,
#    0.704897614982329777029148001187332580475396093589108695173092617281479154830767241122635281163529974 -
#    1.650142513088147247708947059624245257252720231290042316417819674498034877644137253025850560281228377*I ,
#    -1.076616528707866166140063281354417082218302815133925989833006722831009509066220528315547667117751203 +
#    0.621584842663486985776379274390916545843954758529576426865329566748169777049902036177059711634935202*I],
#    [- 0.5304054404159367224104895114788340720170935203460910205123743068972747396895119408071722674386557195*I ,
#    0,
#    -0.4593445857056746135640373146941594119283854329946955531552303069378209950054969329744672091606472850 -
#    0.2652027202079683612052447557394170360085467601730455102561871534486373698447559704035861337193278645*I ,
#    0.918689171411349227128074629388318823856770865989391106310460613875641990010993865948934418321294566,
#    0.5304054404159367224104895114788340720170935203460910205123743068972747396895119408071722674386557230*I ,
#    -0.4593445857056746135640373146941594119283854329946955531552303069378209950054969329744672091606472800 -
#    0.2652027202079683612052447557394170360085467601730455102561871534486373698447559704035861337193278649*I]
#])

#P = magma.Matrix([
#    [0.7083964215557102388915848572327136182620753648713470938161797537439929464554891349596698649565383625,
#    1.001823826900653755854008522457397512910223849373963211634718240088065973837098434526606778344173978,
#    0.8551101242281819973727966898450555655861496071226551527254489969160294601462937847431383216503561690 +
#    0.254115587195274860061798254321272925189309646777295451676397176792772660115416432823815311439019456*I ,
#    -0.2934274053449435169624236652246838946481484845026161178185384863440730273816092995669369133876356116,
#    -0.5009119134503268779270042612286987564551119246869816058173591200440329869185492172633033891720869940 +
#    0.359373709821960516822938109557397370330119304943460147427792486645242774558869831428432433126956505*I ,
#    -0.5616827188832384804103730246203716709380011226200390349069105105719564327646844851762014082627205542 +
#    0.254115587195274860061798254321272925189309646777295451676397176792772660115416432823815311439019456*I],
#    [0.4149690162107667219291611920080297236139268803687309759976412673999199190738798353927329515689027612,
#    -0.586854810689887033924847330449367789296296969005232235637076972688146054763218599133873826775271208,
#    -0.0859428972395601559978430692206690328411850443182506298197178526441130678446693818705704376031842258 +
#    0.8676048842125102369465346181999432207087385984980510507805868402307880947897026970760630560049954160*I ,
#    1.001823826900653755854008522457397512910223849373963211634718240088065973837098434526606778344173976,
#    0.293427405344943516962423665224683894648148484502616117818538486344073027381609299566936913387635600 -
#    1.226978594034470753769472727757340591038857903441511198208379326876030869348572528504495489131951911*I ,
#    -0.9158809296610935998561654532367284800690388050557125818150003874439529059924290526560363407409897472 +
#    0.8676048842125102369465346181999432207087385984980510507805868402307880947897026970760630560049954140*I],
#    [- 0.4293288355636027623516814049074150331258684748735280750320383948407585267488579654991165671490922123*I ,
#    0,
#    -0.371809678175271945183685693785863672027502235512748441141408771261966564637103093410985594353169677 -
#    0.2146644177818013811758407024537075165629342374367640375160191974203792633744289827495582835745461097*I ,
#    0.743619356350543890367371387571727344055004471025496882282817542523933129274206186821971188706339351,
#    0.4293288355636027623516814049074150331258684748735280750320383948407585267488579654991165671490922097*I ,
#    -0.371809678175271945183685693785863672027502235512748441141408771261966564637103093410985594353169677 -
#    0.2146644177818013811758407024537075165629342374367640375160191974203792633744289827495582835745461077*I]
#])

P = magma.Transpose(P)
g = 0
End = EndomorphismData(g, prec = prec)
End._P_ = P

AsAlg, As, Rs = End.geometric_representations()
print AsAlg
print End.field_of_definition()
print End.geometric().representations()
print End.over_base().representations()

#print Rs
#print magma.SplittingInfoOneOff(AsAlg, As, Rs)

#K = magma.BaseRing(AsAlg[1])
#G = magma.GaloisGroup(K)
#print K
#print G
#print magma.IsCyclic(G)
#
#idem = (AsAlg[2] - 1)/2
#idem = magma.Matrix(magma.BaseRing(P), 3, 3, magma.Eltseq(idem))
#Q = magma.LatticesFromIdempotentG2Alt(idem, P)
#print Q
#
## Analyze factor:
#g = 0
#End = EndomorphismData(g, prec = prec)
#End._P_ = Q
#
#AsAlg, As, Rs = End.geometric_representations()
#print AsAlg
#print Rs
#print magma.SplittingInfoOneOff(AsAlg, As, Rs)
#
#K = magma.BaseRing(AsAlg[1])
#G = magma.GaloisGroup(K)
#print K
#print G
#print magma.IsCyclic(G)

